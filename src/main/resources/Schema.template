{
  "$schema": "{{{draft}}}",
  "type": "object",
  "definitions": {
    "Transform": {
      "type": "object",
      "oneOf": [
        {
          "$comment": "You can use the AWS::Include transform anywhere within the AWS CloudFormation template except in the template parameters section or the template version field. For example, you can use AWS::Include in the mappings section.",
          "properties": {
            "Name": {
              "type": "string",
              "enum": [
                "AWS::Include"
              ]
            },
            "Parameters": {
              "type": "object",
              "properties": {
                "Location": {
                  "$comment": "The location is an Amazon S3 URI, with a specific file name in an S3 bucket. For example, s3://MyBucketName/MyFile.yaml.",
                  "type": "string",
                  "format": "uri"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        {
          "$comment": "Use a transform to simplify template authoring for serverless applications. ",
          "type": "string",
          "enum": [
            "AWS::Serverless-2016-10-31"
          ]
        }
      ]
    },
    "Attribute": {
      "$comment": "Attribute defines the content of a Mapping",
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]{1,255}$": {
          "type": [
            "boolean",
            "integer",
            "number",
            "string"
          ]
        }
      },
      "minProperties": 1,
      "maxProperties": 64,
      "additionalProperties": false
    },
    "Mapping": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]{1,255}$": {
          "$ref": "#/definitions/Attribute"
        }
      },
      "minProperties": 1,
      "maxProperties": 64,
      "additionalProperties": false
    },
    "FnRef": {
      "type": "object",
      "properties": {
        "Ref": {
          "type": "string"
        }
      },
      "required": [
        "Ref"
      ],
      "additionalProperties": false
    },
    "FnGetAtt": {
      "type": "object",
      "properties": {
        "Fn::GetAtt": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "maxItems": 3,
          "minItems": 2
        }
      },
      "required": [
        "Fn::GetAtt"
      ],
      "additionalProperties": false
    },
    "CommonParams": {
      "properties": {
        "Description": {
          "type": "string",
          "maxLength": 4000
        },
        "NoEcho": {
          "type": "boolean"
        },
        "ConstraintDescription": {
          "type": "string",
          "maxLength": 4000
        }
      }
    },
    "StringParamCommon": {
      "allOf": [
        {
          "properties": {
            "Default": {
              "type": "string"
            },
            "AllowedValues": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            }
          }
        },
        {
          "$ref": "#/definitions/CommonParams"
        }
      ]
    },
    "StringParam": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "Type": {
              "enum": [
                "String"
              ]
            },
            "AllowedPattern": {
              "type": "string"
            },
            "MaxLength": {
              "type": "integer",
              "minimum": 1
            },
            "MinLength": {
              "type": "integer",
              "minimum": 1
            }
          },
          "required": [
            "Type"
          ]
        },
        {
          "$ref": "#/definitions/StringParamCommon"
        }
      ]
    },
    "StringLikeParam": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "Type": {
              "enum": [
                "AWS::EC2::AvailabilityZone::Name",
                "AWS::EC2::Image::Id",
                "AWS::EC2::Instance::Id",
                "AWS::EC2::SecurityGroup::GroupName",
                "AWS::EC2::SecurityGroup::Id",
                "AWS::EC2::Subnet::Id",
                "AWS::EC2::Volume::Id",
                "AWS::EC2::VPC::Id",
                "AWS::Route53::HostedZone::Id",
                "AWS::EC2::KeyPair::KeyName",
                "AWS::SSM::Parameter::Value<AWS::EC2::AvailabilityZone::Name>",
                "AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>",
                "AWS::SSM::Parameter::Value<AWS::EC2::Instance::Id>",
                "AWS::SSM::Parameter::Value<AWS::EC2::SecurityGroup::GroupName>",
                "AWS::SSM::Parameter::Value<AWS::EC2::SecurityGroup::Id>",
                "AWS::SSM::Parameter::Value<AWS::EC2::Subnet::Id>",
                "AWS::SSM::Parameter::Value<AWS::EC2::Volume::Id>",
                "AWS::SSM::Parameter::Value<AWS::EC2::VPC::Id>",
                "AWS::SSM::Parameter::Value<AWS::Route53::HostedZone::Id>",
                "AWS::SSM::Parameter::Value<AWS::EC2::KeyPair::KeyName>"
              ]
            }
          },
          "required": [
            "Type"
          ]
        },
        {
          "$ref": "#/definitions/StringParamCommon"
        }
      ]
    },
    "NumberParam": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "Type": {
              "enum": [
                "Number"
              ]
            },
            "Default": {
              "type": "integer"
            },
            "AllowedValues": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "minItems": 1
            }
          },
          "required": [
            "Type"
          ]
        },
        {
          "$ref": "#/definitions/CommonParams"
        }
      ]
    },
    "CommaDelimitedList": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "Type": {
              "enum": [
                "CommaDelimitedList",
                "AWS::SSM::Parameter::Value<CommaDelimitedList>"
              ]
            },
            "Default": {
              "type": "string"
            }
          },
          "required": [
            "Type"
          ]
        },
        {
          "$ref": "#/definitions/CommonParams"
        }
      ]
    },
    "StringLikeList": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "Type": {
              "enum": [
                "List<AWS::EC2::AvailabilityZone::Name>",
                "List<AWS::EC2::Image::Id>",
                "List<AWS::EC2::Instance::Id>",
                "List<AWS::EC2::SecurityGroup::GroupName>",
                "List<AWS::EC2::SecurityGroup::Id>",
                "List<AWS::EC2::Subnet::Id>",
                "List<AWS::EC2::Volume::Id>",
                "List<AWS::EC2::VPC::Id>",
                "List<AWS::Route53::HostedZone::Id>",
                "AWS::SSM::Parameter::Value<List<String>>",
                "AWS::SSM::Parameter::Value<List<AWS::EC2::AvailabilityZone::Name>>",
                "AWS::SSM::Parameter::Value<List<AWS::EC2::Image::Id>>",
                "AWS::SSM::Parameter::Value<List<AWS::EC2::Instance::Id>>",
                "AWS::SSM::Parameter::Value<List<AWS::EC2::SecurityGroup::GroupName>>",
                "AWS::SSM::Parameter::Value<List<AWS::EC2::SecurityGroup::Id>>",
                "AWS::SSM::Parameter::Value<List<AWS::EC2::Subnet::Id>>",
                "AWS::SSM::Parameter::Value<List<AWS::EC2::Volume::Id>>",
                "AWS::SSM::Parameter::Value<List<AWS::EC2::VPC::Id>>",
                "AWS::SSM::Parameter::Value<List<AWS::Route53::HostedZone::Id>>"
              ]
            },
            "Default": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1
            }
          }
        },
        {
          "$ref": "#/definitions/CommonParams"
        }
      ]
    },
    "NumberList": {
      "allOf": [
        {
          "type": "object",
          "properties": {
            "Type": {
              "enum": [
                "List<Number>",
                "AWS::SSM::Parameter::Value<List<Integer>>"
              ]
            },
            "Default": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "minItems": 1
            }
          },
          "required": [
            "Type"
          ]
        },
        {
          "$ref": "#/definitions/CommonParams"
        }
      ]
    },
    "parameters": {
      "type": "object",
      "additionalProperties": {
        "oneOf": [
          {
            "$ref": "#/definitions/StringParam"
          },
          {
            "$ref": "#/definitions/StringLikeParam"
          },
          {
            "$ref": "#/definitions/NumberParam"
          },
          {
            "$ref": "#/definitions/CommaDelimitedList"
          },
          {
            "$ref": "#/definitions/StringLikeList"
          },
          {
            "$ref": "#/definitions/NumberList"
          }
        ]
      }
    },
    {{{resources}}}
  },
  "additionalProperties": false,
  "properties": {
    "AWSTemplateFormatVersion": {
      "type": "string",
      "enum": [
        "2010-09-09"
      ]
    },
    "Description": {
      "$comment": "The Description section (optional) enables you to include comments about your template. The Description must follow the AWSTemplateFormatVersion section.",
      "type": "string",
      "maxLength": 1024
    },
    "Metadata": {
      "type": "object"
    },
    "Parameters": {
      "$ref": "#/definitions/parameters"
    },
    "Mappings": {
      "type": "object",
      "patternProperties": {
        "^[a-zA-Z0-9._-]{1,255}$": {
          "$ref": "#/definitions/Mapping"
        }
      },
      "maxProperties": 100,
      "additionalProperties": false
    },
    "Conditions": {
      "type": "object"
    },
    "Transform": {
      "$comment": "The optional Transform section specifies one or more transforms that AWS CloudFormation uses to process your template. The Transform section builds on the simple, declarative language of AWS CloudFormation with a powerful macro system.\nAWS CloudFormation transforms help simplify template authoring by condensing the expression of AWS infrastructure as code and enabling reuse of template components. For example, you can condense a multiple-line resource declaration into a single line in your template.\nAWS CloudFormation supports AWS::Serverless and AWS::Include transform types:\n- An AWS::Serverless transform specifies the version of the AWS Serverless Application Model (AWS SAM) to use. This model defines the AWS SAM syntax that you can use and how AWS CloudFormation processes it. When you create a change set, AWS CloudFormation resolves all Transform functions. For more information about serverless applications and AWS SAM, see Deploying Lambda-based Applications in the AWS Lambda Developer Guide.\n- An AWS::Include transform works with template snippets that are stored separately from the main AWS CloudFormation template. You can insert these snippets into your main template when Creating a Change Set or Updating Stacks Using Change Sets.\nYou can declare a single transform or multiple transforms within a template. AWS CloudFormation executes transformations in the order that they are specified.\nTo declare multiple transforms, use a list format and specify one or more AWS::Include transforms and (optionally) an AWS::Serverless transform. The following example declares two AWS::Include transforms.",
      "$ref": "#/definitions/Transform"
    },
    "Outputs": {
      "type": "object"
    },
    "Resources": {
      "$ref": "#/definitions/resources"
    }
  },
  "description": "{{description}}",
  "required": [
    "Resources"
  ]
}